<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Webtoon Navigation Test - Side Scroller Extension</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f5f5f5;
            line-height: 1.6;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            text-align: center;
        }

        .navigation-container {
            background: white;
            padding: 20px;
            margin: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .section {
            margin: 20px 0;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 6px;
            background: #fafafa;
        }

        .section h3 {
            margin-top: 0;
            color: #333;
        }

        .nav-buttons {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 15px 0;
            padding: 10px;
            background: white;
            border-radius: 4px;
        }

        .episode-navigation {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 20px 0;
            padding: 15px;
            background: #fff;
            border-radius: 8px;
        }

        .nav-link {
            display: inline-block;
            padding: 12px 24px;
            background: #667eea;
            color: white;
            text-decoration: none;
            border-radius: 6px;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .nav-link:hover {
            background: #5a67d8;
            transform: translateY(-2px);
        }

        .arrow-nav {
            background: #764ba2;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            text-decoration: none;
            font-size: 20px;
            transition: all 0.3s ease;
        }

        .arrow-nav:hover {
            background: #6b46c1;
            transform: scale(1.1);
        }

        .episode-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 10px;
            margin: 20px 0;
        }

        .episode-item {
            background: white;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 10px;
            text-align: center;
            text-decoration: none;
            color: #333;
            transition: all 0.2s ease;
        }

        .episode-item:hover {
            background: #f0f0f0;
            border-color: #667eea;
        }

        .episode-item.current {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .content-area {
            min-height: 400px;
            background: white;
            margin: 20px;
            padding: 40px;
            border-radius: 8px;
            text-align: center;
            color: #666;
        }

        .detection-info {
            position: fixed;
            top: 10px;
            right: 10px;
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 10px;
            border-radius: 6px;
            font-size: 12px;
            max-width: 300px;
            z-index: 1000;
        }

        .webtoon-specific {
            border-color: #ff6b6b;
            background: #ffe0e0;
        }

        .flexible-positioning {
            border-color: #feca57;
            background: #fff5e0;
        }

        .test-button {
            background: #28a745;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 10px;
            font-size: 14px;
        }

        .test-button:hover {
            background: #218838;
        }

        .log-area {
            background: #1a1a1a;
            color: #00ff00;
            padding: 15px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            height: 200px;
            overflow-y: auto;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üéÆ Webtoon Navigation Test</h1>
        <p>Testing Side Scroller Extension with Webtoon-style Navigation</p>
    </div>

    <div class="navigation-container">
        <h2>üß™ Navigation Detection Test Areas</h2>
        
        <!-- Webtoon-specific navigation -->
        <div class="section webtoon-specific">
            <h3>üéØ Webtoon Episode Navigation (Enhanced Detection)</h3>
            <div class="episode-navigation">
                <a href="#prev" class="nav-link" id="prev-episode">Previous Episode</a>
                <span style="padding: 12px 24px; background: #f0f0f0; border-radius: 6px; color: #666;">Episode 2</span>
                <a href="#next" class="nav-link" id="next-episode">Next Episode</a>
            </div>
            
            <div class="nav-buttons">
                <a href="#prev-recurrence" class="nav-link">Previous Recurrence</a>
                <a href="#next-recurrence" class="nav-link">Next Recurrence</a>
            </div>
        </div>

        <!-- Flexible positioning navigation -->
        <div class="section flexible-positioning">
            <h3>üìç Flexible Positioning Navigation</h3>
            <div style="display: flex; justify-content: center; gap: 40px; margin: 20px 0;">
                <a href="#left" class="arrow-nav">‚Üê</a>
                <div style="padding: 15px;">Content Area</div>
                <a href="#right" class="arrow-nav">‚Üí</a>
            </div>
        </div>

        <!-- Traditional side navigation -->
        <div class="section">
            <h3>üîÑ Traditional Side Navigation</h3>
            <div style="display: flex; justify-content: space-between; align-items: center; height: 100px;">
                <a href="#prev-page" class="nav-link" style="position: absolute; left: 50px;">Previous</a>
                <div style="text-align: center; flex: 1;">Standard positioning test</div>
                <a href="#next-page" class="nav-link" style="position: absolute; right: 50px;">Next</a>
            </div>
        </div>

        <!-- Episode list for comprehensive testing -->
        <div class="section">
            <h3>üìö Episode List</h3>
            <div class="episode-list">
                <a href="#ep0" class="episode-item">Episode 0</a>
                <a href="#ep1" class="episode-item">Episode 1</a>
                <a href="#ep2" class="episode-item current">Episode 2</a>
                <a href="#ep3" class="episode-item">Episode 3</a>
                <a href="#ep4" class="episode-item">Episode 4</a>
                <a href="#ep5" class="episode-item">Episode 5</a>
            </div>
        </div>
    </div>

    <div class="content-area">
        <h3>üìñ Webtoon Content Area</h3>
        <p>This simulates the main content area of a webtoon viewer.</p>
        <p>The Side Scroller extension should detect the navigation elements above and bind arrow keys to them.</p>
        
        <div style="margin: 30px 0;">
            <button class="test-button" onclick="testDetection()">üîç Test Navigation Detection</button>
            <button class="test-button" onclick="enableDebugMode()">üêõ Enable Debug Mode</button>
            <button class="test-button" onclick="clearLogs()">üßπ Clear Logs</button>
        </div>
        
        <div class="log-area" id="logArea">
            Extension logs will appear here...
        </div>
    </div>

    <div class="detection-info" id="detectionInfo">
        <strong>üéÆ Side Scroller Status</strong><br>
        <span id="leftArrowStatus">‚Üê Left Arrow: Not bound</span><br>
        <span id="rightArrowStatus">‚Üí Right Arrow: Not bound</span><br>
        <span id="detectionStatus">Detection: Ready</span>
    </div>

    <script>
        // Log interceptor to capture extension logs
        const originalLog = console.log;
        const logArea = document.getElementById('logArea');
        
        console.log = function(...args) {
            originalLog.apply(console, args);
            
            // Display in our log area
            const logText = args.join(' ');
            if (logArea && (logText.includes('[Navigation') || logText.includes('[Side Scroller]') || logText.includes('üéØ') || logText.includes('‚úÖ') || logText.includes('‚ùå'))) {
                const logEntry = document.createElement('div');
                logEntry.textContent = `[${new Date().toLocaleTimeString()}] ${logText}`;
                logArea.appendChild(logEntry);
                logArea.scrollTop = logArea.scrollHeight;
            }
        };

        function testDetection() {
            log('üß™ Testing navigation detection...');
            
            if (window.smartNavigationBinder) {
                window.smartNavigationBinder.detector.enableDebugMode();
                const results = window.smartNavigationBinder.detector.testNavigationDetection();
                log(`üìä Test Results: ${results.passed}/${results.total} passed (${((results.passed/results.total)*100).toFixed(1)}%)`);
                
                // Test webtoon-specific detection
                const webtoonTests = [
                    { text: 'Next Episode', expected: 'next' },
                    { text: 'Previous Episode', expected: 'previous' },
                    { text: 'Next Recurrence', expected: 'next' },
                    { text: 'Previous Recurrence', expected: 'previous' }
                ];
                
                log('üéØ Testing Webtoon-specific patterns...');
                window.smartNavigationBinder.detector.testNavigationDetection(webtoonTests);
            } else {
                log('‚ùå Side Scroller extension not loaded or initialized');
            }
        }

        function enableDebugMode() {
            if (window.smartNavigationBinder) {
                window.smartNavigationBinder.enableDebugMode();
                log('üêõ Debug mode enabled');
                
                // Re-initialize to see debug output
                setTimeout(() => {
                    window.smartNavigationBinder.reinitialize();
                }, 100);
            } else {
                log('‚ùå Extension not available');
            }
        }

        function clearLogs() {
            logArea.innerHTML = 'Logs cleared...<br>';
        }

        function log(message) {
            console.log(`[Test Page] ${message}`);
        }

        function updateStatus() {
            if (window.getNavigationStatus) {
                const status = window.getNavigationStatus();
                document.getElementById('leftArrowStatus').textContent = `‚Üê Left Arrow: ${status.leftArrow ? 'Bound' : 'Not bound'}`;
                document.getElementById('rightArrowStatus').textContent = `‚Üí Right Arrow: ${status.rightArrow ? 'Bound' : 'Not bound'}`;
                document.getElementById('detectionStatus').textContent = `Detection: ${status.extensionActive ? 'Active' : 'Inactive'}`;
            }
        }

        // Update status periodically
        setInterval(updateStatus, 1000);

        // Initialize
        log('üéÆ Webtoon test page loaded');
        log('üìã This page simulates a webtoon viewer with various navigation patterns');
        log('üîç Enable the Side Scroller extension and watch for navigation detection');
        
        // Test the extension after page load
        setTimeout(() => {
            if (window.smartNavigationBinder) {
                log('‚úÖ Side Scroller extension detected and active');
                updateStatus();
            } else {
                log('‚ö†Ô∏è Side Scroller extension not found - make sure it\'s enabled');
            }
        }, 2000);
    </script>
</body>
</html> 